# Licen-Sure Project TODO

This document outlines the necessary tasks to complete the Licen-Sure project.

## General
- [x] **Setup Environment:** Create a `.env` file for the `backend` from the `.env.example`.
- [ ] **API Documentation:** Create a unified API documentation (e.g., using Swagger/OpenAPI) for the communication between the frontend, backend, and AI service.
- [ ] **Testing Strategy:** Define and implement an end-to-end testing strategy.
- [ ] **Deployment:** Plan and document the deployment process for all three services.
- [ ] **READMEs:** Populate the `README.md` files for the `frontend` and `ai-service` with setup instructions and project details. Update the root `README.md` to explain the overall project.

## Frontend (Next.js)
- [ ] **Styling:** Implement the `UIUX_STYLING_GUIDE.md` using Tailwind CSS.
- [ ] **Authentication:**
    - [ ] Complete the `[...nextauth]` route to handle user login and registration with the backend.
    - [ ] Create a registration page (`src/app/register/page.tsx`).
    - [ ] Create a login page (`src/app/login/page.tsx`).
- [ ] **Dashboard (`src/app/dashboard/page.tsx`):**
    - [ ] Display a list of uploaded documents using the `useDocuments` hook.
    - [ ] Implement the `FileUploadForm.tsx` component to allow users to upload new documents.
- [ ] **Quiz (`src/app/quiz/[id]/page.tsx`):**
    - [ ] Fetch quiz questions for a given document ID.
    - [ ] Implement the quiz interface according to the styling guide.
    - [ ] Submit quiz attempts to the backend.
- [ ] **Quiz History (`src/app/quiz-history/[id]/page.tsx`):**
    - [ ] Display past quiz attempts for a user.
    - [ ] Show correct/incorrect answers and explanations.
- [ ] **Component Library:**
    - [ ] Refine `Navbar.tsx` to reflect the user's authentication state.
    - [ ] Build out other reusable components as needed (e.g., Buttons, Cards, Modals) based on the styling guide.
- [ ] **API Integration (`src/lib/api.ts`):**
    - [ ] Implement functions to communicate with all necessary backend endpoints (login, register, get documents, upload document, get quiz, etc.).

## Backend (Laravel)
- [x] **Authentication:**
    - [x] Implement `AuthController.php` to handle registration, login, and logout, issuing Sanctum tokens.
- [x] **API Routes (`routes/api.php`):**
    - [x] Define all necessary API endpoints for the frontend.
        - `POST /register`
        - `POST /login`
        - `GET /documents`
        - `POST /documents` (for uploads)
        - `GET /quizzes/{document_id}`
        - `POST /quizzes/{quiz_id}/attempts`
        - `GET /quiz-attempts/{user_id}`
- [x] **Document Processing:**
    - [x] Implement the `DocumentController.php` to handle file uploads, storing files in `storage/app/private`.
    - [x] Dispatch the `ProcessDocumentJob` after a document is uploaded.
    - [x] In `ProcessDocumentJob`, call the AI service to generate a quiz from the document.
    - [x] Store the questions and choices generated by the AI service in the database.
- [x] **Quiz Logic:**
    - [x] Implement `QuizAttemptController.php` to store user's quiz answers.
    - [x] Add logic to score the quiz and store the result.
- [x] **Database:**
    - [x] Review and finalize the database schema in the existing migrations.
    - [x] Ensure all model relationships are correctly defined (e.g., `User`, `Document`, `Question`, `QuizAttempt`).

## AI Service (Python/FastAPI)
- [x] **API Endpoint (`app/main.py`):**
    - [x] Create a `/generate-quiz` endpoint that accepts a file path or file content. (Implemented as `/process-document`)
- [x] **Document Parsing (`app/services.py`):**
    - [x] Implement logic to extract text from different document types:
        - [x] PDF (`pypdf`)
        - [x] DOCX (`python-docx`)
        - [x] Scanned documents/images (`pytesseract` for OCR)
- [x] **Quiz Generation (`app/services.py`):**
    - [x] Use the extracted text to create a prompt for the Ollama model.
    - [x] The prompt should ask for a set of multiple-choice questions based on the text.
    - [x] Parse the response from Ollama into a structured format (e.g., a list of `Question` and `Choice` Pydantic models defined in `app/models.py`).
- [x] **Error Handling:** Implement robust error handling for cases where text extraction fails or the LLM response is not in the expected format.
- [x] **Configuration:** Make the Ollama model and other settings configurable (e.g., via environment variables).
